<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capítulo 58 Implementación de un sistema experto en el ámbito pediátrico | Fundamentos de ciencia de datos con R</title>
<meta name="author" content="Gema Fernández-Avilés y José-María Montero">
<meta name="description" content="Arturo Peralta\(^{a,b}\), José Ángel Olivas\(^{a}\) y Eusebio Angulo\(^{a}\) \(^{a}\)Universidad Internacional de Valencia, \(^{b}\)Universidad Internacional de la Rioja  58.1 Introducción  Sin...">
<meta name="generator" content="bookdown 0.34 with bs4_book()">
<meta property="og:title" content="Capítulo 58 Implementación de un sistema experto en el ámbito pediátrico | Fundamentos de ciencia de datos con R">
<meta property="og:type" content="book">
<meta property="og:image" content="/img/cover.png">
<meta property="og:description" content="Arturo Peralta\(^{a,b}\), José Ángel Olivas\(^{a}\) y Eusebio Angulo\(^{a}\) \(^{a}\)Universidad Internacional de Valencia, \(^{b}\)Universidad Internacional de la Rioja  58.1 Introducción  Sin...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capítulo 58 Implementación de un sistema experto en el ámbito pediátrico | Fundamentos de ciencia de datos con R">
<meta name="twitter:description" content="Arturo Peralta\(^{a,b}\), José Ángel Olivas\(^{a}\) y Eusebio Angulo\(^{a}\) \(^{a}\)Universidad Internacional de Valencia, \(^{b}\)Universidad Internacional de la Rioja  58.1 Introducción  Sin...">
<meta name="twitter:image" content="/img/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
<link rel="stylesheet" href="bs4_book.css">
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Fundamentos de ciencia de datos con R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Buscar" aria-label="Buscar">
</form>

      <nav aria-label="Contenido"><h2>Contenido</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Prefacio</a></li>
<li class="book-part">Ciencia, datos, software… y científicos</li>
<li><a class="" href="ciencia-datos.html"><span class="header-section-number">1</span> ¿Es la ciencia de datos una ciencia?</a></li>
<li><a class="" href="metodologia.html"><span class="header-section-number">2</span> Metodología en ciencia de datos</a></li>
<li><a class="" href="ch-110003.html"><span class="header-section-number">3</span> R para ciencia de datos</a></li>
<li><a class="" href="cap-etica.html"><span class="header-section-number">4</span> Ética en la ciencia de datos</a></li>
<li class="book-part">Bienvenidos a la jungla de datos</li>
<li><a class="" href="datos-sql.html"><span class="header-section-number">5</span> Gestión de bases de datos relacionales</a></li>
<li><a class="" href="cap-nosql.html"><span class="header-section-number">6</span> Gestión de bases de datos NoSQL</a></li>
<li><a class="" href="DGDQM.html"><span class="header-section-number">7</span> Gobierno, gestión y calidad del dato</a></li>
<li><a class="" href="id_130009.html"><span class="header-section-number">8</span> Integración y limpieza de datos</a></li>
<li><a class="" href="chap-feature.html"><span class="header-section-number">9</span> Selección y transformación de variables</a></li>
<li><a class="" href="chap-herramientas.html"><span class="header-section-number">10</span> Herramientas para el análisis en ciencia de datos</a></li>
<li><a class="" href="id_120006-aed.html"><span class="header-section-number">11</span> Análisis exploratorio de datos</a></li>
<li class="book-part">Fundamentos de estadística</li>
<li><a class="" href="Funda-probab.html"><span class="header-section-number">12</span> Probabilidad</a></li>
<li><a class="" href="Fundainfer.html"><span class="header-section-number">13</span> Inferencia estadística</a></li>
<li><a class="" href="muestreo.html"><span class="header-section-number">14</span> Muestreo y remuestreo</a></li>
<li class="book-part">Modelización estadística</li>
<li><a class="" href="cap-lm.html"><span class="header-section-number">15</span> Modelización lineal</a></li>
<li><a class="" href="cap-glm.html"><span class="header-section-number">16</span> Modelos lineales generalizados</a></li>
<li><a class="" href="cap-gam.html"><span class="header-section-number">17</span> Modelos aditivos generalizados</a></li>
<li><a class="" href="cap-mxm.html"><span class="header-section-number">18</span> Modelos mixtos</a></li>
<li><a class="" href="cap-sparse.html"><span class="header-section-number">19</span> Modelos sparse y métodos penalizados de regresión</a></li>
<li><a class="" href="cap-series-temp.html"><span class="header-section-number">20</span> Modelización de series temporales</a></li>
<li><a class="" href="cap-discriminante.html"><span class="header-section-number">21</span> Análisis discriminante</a></li>
<li><a class="" href="cap-conjunto.html"><span class="header-section-number">22</span> Análisis conjunto</a></li>
<li><a class="" href="tablas-contingencia.html"><span class="header-section-number">23</span> Análisis de tablas de contingencia</a></li>
<li class="book-part">Machine learning supervisado</li>
<li><a class="" href="cap-arboles.html"><span class="header-section-number">24</span> Árboles de clasificación y regresión</a></li>
<li><a class="" href="cap-svm.html"><span class="header-section-number">25</span> Máquinas de vector soporte</a></li>
<li><a class="" href="cap-knn.html"><span class="header-section-number">26</span> Clasificador k-vecinos más próximos</a></li>
<li><a class="" href="cap-naive-bayes.html"><span class="header-section-number">27</span> Naive Bayes</a></li>
<li><a class="" href="cap-bagg-rf.html"><span class="header-section-number">28</span> Métodos ensamblados: bagging y random forest</a></li>
<li><a class="" href="cap-boosting-xgboost.html"><span class="header-section-number">29</span> Boosting y el algoritmo XGBoost</a></li>
<li class="book-part">Machine learning no supervisado</li>
<li><a class="" href="jerarquico.html"><span class="header-section-number">30</span> Análisis cluster: clusterización jerárquica</a></li>
<li><a class="" href="no-jerarquico.html"><span class="header-section-number">31</span> Análisis cluster: clusterización no jerárquica</a></li>
<li><a class="" href="acp.html"><span class="header-section-number">32</span> Análisis de componentes principales</a></li>
<li><a class="" href="an%C3%A1lisis-factorial.html"><span class="header-section-number">33</span> Análisis factorial</a></li>
<li><a class="" href="escalamiento-multidimensional.html"><span class="header-section-number">34</span> Escalamiento multidimensional</a></li>
<li><a class="" href="correspondencias.html"><span class="header-section-number">35</span> Análisis de correspondencias</a></li>
<li class="book-part">Deep learning</li>
<li><a class="" href="capNN.html"><span class="header-section-number">36</span> Redes neuronales artificiales</a></li>
<li><a class="" href="cap-redes-convol.html"><span class="header-section-number">37</span> Redes neuronales convolucionales</a></li>
<li class="book-part">Ciencia de datos de texto y redes</li>
<li><a class="" href="mineria-textos.html"><span class="header-section-number">38</span> Minería de textos</a></li>
<li><a class="" href="grafos.html"><span class="header-section-number">39</span> Análisis de grafos y redes sociales</a></li>
<li class="book-part">Ciencia de datos espaciales</li>
<li><a class="" href="datos-espaciales.html"><span class="header-section-number">40</span> Trabajando con datos espaciales</a></li>
<li><a class="" href="geo.html"><span class="header-section-number">41</span> Geoestadística</a></li>
<li><a class="" href="cap-econom-esp.html"><span class="header-section-number">42</span> Modelos econométricos espaciales</a></li>
<li><a class="" href="cap-pp.html"><span class="header-section-number">43</span> Procesos de puntos</a></li>
<li class="book-part">Comunica y colabora</li>
<li><a class="" href="id_120007-informes.html"><span class="header-section-number">44</span> Informes reproducibles con R Markdown y Quarto</a></li>
<li><a class="" href="shiny.html"><span class="header-section-number">45</span> Creación de aplicaciones web interactivas con Shiny</a></li>
<li><a class="" href="github.html"><span class="header-section-number">46</span> Git y GitHub R</a></li>
<li><a class="" href="geoproces.html"><span class="header-section-number">47</span> Geoprocesamiento en nube</a></li>
<li class="book-part">Casos de estudio en ciencia de datos</li>
<li><a class="" href="cap-crimen.html"><span class="header-section-number">48</span> Análisis de una red criminal</a></li>
<li><a class="" href="cap-publicidad.html"><span class="header-section-number">49</span> Optimización de inversiones publicitarias</a></li>
<li><a class="" href="cap-twitter.html"><span class="header-section-number">50</span> ¿Cómo twitea Elon Musk?</a></li>
<li><a class="" href="cap-periodismo.html"><span class="header-section-number">51</span> Análisis electoral: de Rstudio a su periódico</a></li>
<li><a class="" href="paro-clm.html"><span class="header-section-number">52</span> Crisis: impacto en el paro de Castilla-La Mancha</a></li>
<li><a class="" href="cap-rfm.html"><span class="header-section-number">53</span> Segmentación de clientes en el comerico minorista</a></li>
<li><a class="" href="cap-medicina.html"><span class="header-section-number">54</span> Análisis de datos en medicina</a></li>
<li><a class="" href="cap-futbol.html"><span class="header-section-number">55</span> Messi y Ronaldo: dos ídolos desde la perspectiva de los datos</a></li>
<li><a class="" href="cambioclimatico.html"><span class="header-section-number">56</span> Un dato sobre el cambio climático</a></li>
<li><a class="" href="cap-ree.html"><span class="header-section-number">57</span> Predicción de consumo eléctrico con redes neuronales</a></li>
<li><a class="active" href="cap-sist-exp.html"><span class="header-section-number">58</span> Implementación de un sistema experto en el ámbito pediátrico</a></li>
<li><a class="" href="nlp-textil.html"><span class="header-section-number">59</span> El procesamiento del lenguaje natural para tendencias de moda en textil</a></li>
<li><a class="" href="cap-fraude.html"><span class="header-section-number">60</span> Detección de fraude de tarjetas de crédito</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="info-session.html"><span class="header-section-number">A</span> Información de la sesión</a></li>
<li><a class="" href="referncias.html">Referncias</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="cap-sist-exp" class="section level1" number="58">
<h1>
<span class="header-section-number">Capítulo 58</span> Implementación de un sistema experto en el ámbito pediátrico<a class="anchor" aria-label="anchor" href="#cap-sist-exp"><i class="fas fa-link"></i></a>
</h1>
<p><em>Arturo Peralta</em><span class="math inline">\(^{a,b}\)</span>, <em>José Ángel Olivas</em><span class="math inline">\(^{a}\)</span> y <em>Eusebio Angulo</em><span class="math inline">\(^{a}\)</span></p>
<p><span class="math inline">\(^{a}\)</span>Universidad Internacional de Valencia, <span class="math inline">\(^{b}\)</span>Universidad Internacional de la Rioja</p>
<div id="introducción-28" class="section level2" number="58.1">
<h2>
<span class="header-section-number">58.1</span> Introducción<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n-28"><i class="fas fa-link"></i></a>
</h2>
<p>
</p>
<p>Sin lugar a duda, el análisis de situaciones complejas para la evaluación y toma de decisiones es un proceso para el que tradicionalmente se requiere el apoyo de un especialista dispuesto a poner en uso todo su conocimiento. Sin embargo, el desarrollo de sistemas automáticos capaces de modelar el conocimiento que un experto podría tener sobre un ámbito concreto, y de procesarlo para alcanzar una respuesta adecuada a una consulta relacionada, resulta cada día más extendido como mecanismo de ayuda. A este tipo de herramientas se les denomina Sistemas Expertos (SE).</p>
<p>En este capítulo se introducen los conceptos teóricos fundamentales de la Ingeniería del Conocimiento, los componentes y el funcionamiento de los SE para, posteriormente, presentar cómo su aplicación puede apoyar en el proceso de evaluación clínica en el ámbito pediátrico de atención primaria.
Finalmente, se incluye una sencilla implementación en <strong>R</strong> del SE enfocado a la ayuda en esta problemática.</p>
</div>
<div id="marco-teórico" class="section level2" number="58.2">
<h2>
<span class="header-section-number">58.2</span> Marco teórico<a class="anchor" aria-label="anchor" href="#marco-te%C3%B3rico"><i class="fas fa-link"></i></a>
</h2>
<p>Un <strong>Sistema Experto (SE)</strong> es un programa de ordenador que trata de emular el comportamiento de una persona experta en un dominio de conocimiento específico ante un problema que se plantee en dicho dominio y cómo llega a su solución.</p>
<p>La <strong>Ingeniería del Conocimiento</strong> se ocupa, entre otras cosas, del proceso de especificación, análisis y desarrollo de un sistema experto <span class="citation">(<a href="referncias.html#ref-MaMoCa2005" role="doc-biblioref">Martínez R. 2005</a>)</span>.</p>
<p>Los principales componentes de un SE son:
(i) La <strong>Base de Hechos (BH)</strong>, que contiene la definición del entorno sobre el que se van a resolver problemas. Hace el papel de “ojos” del SE.
(ii) La <strong>Base de Conocimientos (BC)</strong>, que contiene la información del dominio específico, convenientemente representado, capaz de resolver problemas. También puede considerar la representación de incertidumbre.
(iii) El <strong>Motor de Inferencias</strong>, que es el proceso de razonamiento que usa el SE. Combina hechos y conocimiento para emitir una conclusión.
(iv) El <strong>Interfaz de entrada/salida</strong> para comunicarse con los usuarios y/o expertos.</p>
<p>En la Fig.
<a href="cap-sist-exp.html#fig:ComponentesSistemaExperto">58.1</a> se muestra un diagrama con los principales componentes de un SE.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:ComponentesSistemaExperto"></span>
<img src="img/ComponentesSistemaExperto.png" alt="Componentes de un SE" width="100%"><p class="caption">
Figura 58.1: Componentes de un SE
</p>
</div>
<p>Las principales limitaciones en la construcción de SE vienen dadas porque el conocimiento experto humano es experiencia compilada, es heurístico, esto es, basado en experiencia y en reglas prácticas. Es incompleto, impreciso e incierto, y a veces inconsistente y con errores o imprecisiones.
Es por ello que las limitaciones de todo SE pueden ser que no conoce lo que conoce ni por qué, carece de imaginación, emociones, inteligencia innata, sentido común, etc. Tiene poco conocimiento de sí mismo, del usuario y del contexto de cada interacción y capacidad de razonamiento limitada por su estrategia de construcción.</p>
<p>En este contexto, los <strong>sistemas de producción</strong> son modelos de cálculo que han probado su eficiencia en la Ingeniería del Conocimiento tanto en el desarrollo de algoritmos de búsqueda como en el modelado de problemas del dominio humano. Sus componentes principales son:</p>
<ol style="list-style-type: decimal">
<li>Las <strong>reglas de producción</strong>: son la forma más extendida de representar el conocimiento, constan de Condiciones (Hipótesis) y Acciones (Conclusiones) y tienen la forma:</li>
</ol>
<div class="sourceCode" id="cb834"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb834-1"><a href="cap-sist-exp.html#cb834-1" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Si</span> (If)</span>
<span id="cb834-2"><a href="cap-sist-exp.html#cb834-2" aria-hidden="true" tabindex="-1"></a>      Condición <span class="dv">1</span> </span>
<span id="cb834-3"><a href="cap-sist-exp.html#cb834-3" aria-hidden="true" tabindex="-1"></a>      y Condición <span class="dv">2</span> </span>
<span id="cb834-4"><a href="cap-sist-exp.html#cb834-4" aria-hidden="true" tabindex="-1"></a>      ... </span>
<span id="cb834-5"><a href="cap-sist-exp.html#cb834-5" aria-hidden="true" tabindex="-1"></a>      y Condición n</span>
<span id="cb834-6"><a href="cap-sist-exp.html#cb834-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Entonces</span> (Then)</span>
<span id="cb834-7"><a href="cap-sist-exp.html#cb834-7" aria-hidden="true" tabindex="-1"></a>      Conclusión <span class="dv">1</span></span>
<span id="cb834-8"><a href="cap-sist-exp.html#cb834-8" aria-hidden="true" tabindex="-1"></a>      Conclusión <span class="dv">2</span></span>
<span id="cb834-9"><a href="cap-sist-exp.html#cb834-9" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb834-10"><a href="cap-sist-exp.html#cb834-10" aria-hidden="true" tabindex="-1"></a>      y Conclusión m</span></code></pre></div>
<p>Es la forma más extendida de representar el conocimiento. Ejemplo de Regla de producción:</p>
<div class="sourceCode" id="cb835"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb835-1"><a href="cap-sist-exp.html#cb835-1" aria-hidden="true" tabindex="-1"></a>    Si </span>
<span id="cb835-2"><a href="cap-sist-exp.html#cb835-2" aria-hidden="true" tabindex="-1"></a>      ha fallado la bombilla </span>
<span id="cb835-3"><a href="cap-sist-exp.html#cb835-3" aria-hidden="true" tabindex="-1"></a>      y hay una de repuesto </span>
<span id="cb835-4"><a href="cap-sist-exp.html#cb835-4" aria-hidden="true" tabindex="-1"></a>      y está útil</span>
<span id="cb835-5"><a href="cap-sist-exp.html#cb835-5" aria-hidden="true" tabindex="-1"></a>    Entonces</span>
<span id="cb835-6"><a href="cap-sist-exp.html#cb835-6" aria-hidden="true" tabindex="-1"></a>      cambiar la bombilla por la de repuesto</span>
<span id="cb835-7"><a href="cap-sist-exp.html#cb835-7" aria-hidden="true" tabindex="-1"></a>      y seguir trabajando</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><p><strong>Memoria de trabajo</strong>: contiene una descripción del estado actual del mundo o entorno de la aplicación en cada paso del proceso de razonamiento.
Esta descripción es un modelo que servirá para asociar los antecedentes de las reglas con las observaciones del mundo, con el objetivo de seleccionar o producir las acciones apropiadas. En el momento en que se cumplen todas las condiciones de una regla se produce el “disparo” de la misma, ejecutándose la acción. Esta operación alterará el contenido de la memoria de trabajo.</p></li>
<li><p><strong>Ciclo de reconocimiento y actuación</strong>: es el procedimiento de control de un sistema de producción. Es un procedimiento de feedforward o hacia adelante. La memoria de trabajo se inicializa con la descripción del problema. Los modelos almacenados en la memoria de trabajo se tratan de superponer en las condiciones de las producciones. Tras ello, se crea un conjunto “conflicto”, es decir, un subconjunto de producciones cuyas condiciones se cumplen. Se escoge una producción y se “dispara” o se activa. La acción de la regla es “disparada” cambiando el contenido de la memoria de trabajo. Se repite todo el proceso descrito con la memoria de trabajo modificada. El proceso continúa hasta que no haya condiciones en las reglas que cumplan el contenido de los modelos de la memoria de trabajo.</p></li>
</ol>
<p>Una de las principales ventajas de los sistemas de producción en los SE es la separación del conocimiento y del control. Se pueden hacer cambios fáciles de reglas sin cambiar el control y viceversa. Otra es la modularidad de las reglas de producción y la independencia del lenguaje de programación usado.</p>
<div id="razonamiento" class="section level3" number="58.2.1">
<h3>
<span class="header-section-number">58.2.1</span> Razonamiento<a class="anchor" aria-label="anchor" href="#razonamiento"><i class="fas fa-link"></i></a>
</h3>
<p>El razonamiento se define como el proceso de obtención de inferencias o conclusiones a partir de unos hechos u observaciones reales o asumidos y de un conocimiento previo. La inferencia es el proceso por el que a partir de unos hechos conocidos se obtienen conclusiones acerca de otros desconocidos <span class="citation">(<a href="referncias.html#ref-Fleitas2017" role="doc-biblioref">Fleitas 2017</a>)</span> y Begu04. La realización de este tipo de procesamiento es llevada a cabo por el denominado <strong>motor de inferencia</strong>.</p>
<p>El razonamiento automático ya se utilizaba en los 50 en juegos. En 1963 se presentó el sistema <em>“General Problem Solver”</em> capaz de hacer inferencias lógicas (Newel y Simon).</p>
<p>Tipos de razonamiento en SE:</p>
<ul>
<li><p><strong><em>Forward chaining</em></strong> (encadenamiento hacia delante, deductivo, progresivo, dirigido por datos o hechos): Síntomas <span class="math inline">\(\rightarrow\)</span> Causas</p></li>
<li><p><strong><em>Backward chaining</em></strong> (encadenamiento hacia atrás, inductivo, regresivo, dirigido por metas u objetivos): Síntomas <span class="math inline">\(\leftarrow\)</span> Causas</p></li>
</ul>
<p>Pasos del motor de inferencia:</p>
<ol style="list-style-type: decimal">
<li><p>Elaboración de un <strong>conjunto conflicto</strong> con todas las reglas cuyas condiciones se cumplen.</p></li>
<li><p><strong>Detección</strong> (filtro) de reglas pertinentes o <strong>selección</strong> de reglas a partir de unos hechos. Se trata de obtener de la Base de Cconocimiento (BC) el conjunto de reglas aplicables en una situación determinada o estado de la Base de Hechos (BH).</p></li>
<li><p><strong>Aplicación de reglas</strong> o <strong>resolución del conflicto</strong>. Consiste en seleccionar una regla del conjunto conflicto y dispararla (ejecutar su conclusión). Se altera la BH o memoria de trabajo incluyendo el consecuente de la regla “disparada”.</p></li>
<li><p><strong>Vuelta a 1</strong> hasta que el conjunto <strong>conflicto</strong> esté <strong>vacío</strong>.</p></li>
</ol>
<p>Ciclo de “razonamiento hacia delante”:</p>
<ol style="list-style-type: decimal">
<li><p>Parte de unas observaciones (<strong>hechos</strong>).</p></li>
<li><p>A partir de los hechos observados, se <strong>seleccionan las reglas</strong> cuyas condiciones están relacionadas con estos.</p></li>
<li><p>Las reglas seleccionadas son examinadas para ver si cumplen todas sus condiciones. Aquellas que las verifican constituyen el <strong>“conjunto conflicto”</strong>.</p></li>
<li><p>Del total de reglas que forman el conjunto conflicto se selecciona una sola y se activa (se “dispara”). La selección de una regla del conjunto conflicto se denomina <strong>“resolución del conflicto”</strong></p></li>
<li><p>La activación de la regla provocará la <strong>aparición de otros hechos</strong> que se añaden a los observados y se <strong>actualiza</strong> la base de hechos.</p></li>
<li><p>Volver al <strong>paso 2</strong> hasta analizar todos los hechos observados y deducidos.</p></li>
</ol>
<p>En la Fig.
<a href="cap-sist-exp.html#fig:FiguraRazonamientoHaciaDelante">58.2</a> se muestra el algoritmo correspondiente al ciclo de inferencia hacia adelante.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:FiguraRazonamientoHaciaDelante"></span>
<img src="img/Figura1CicloRazonamientoHaciaDelante.png" alt="Ciclo de razonamiento hacia delante" width="100%"><p class="caption">
Figura 58.2: Ciclo de razonamiento hacia delante
</p>
</div>
</div>
</div>
<div id="sistema-experto-para-el-ámbito-pediátrico-en-atención-primaria" class="section level2" number="58.3">
<h2>
<span class="header-section-number">58.3</span> Sistema experto para el ámbito pediátrico en atención primaria<a class="anchor" aria-label="anchor" href="#sistema-experto-para-el-%C3%A1mbito-pedi%C3%A1trico-en-atenci%C3%B3n-primaria"><i class="fas fa-link"></i></a>
</h2>
<p>En la actualidad, uno de los principales problemas a los que se enfrentan los profesionales de la sanidad en el ámbito pediátrico de atención primaria en España es la falta del tiempo suficiente para realizar una evaluación clínica del estado del paciente. La necesidad de un mayor número de médicos especialistas y la aparición de picos de demanda motivados fenómenos como el COVID, o de modo estacional por otras enfermedades recurrentes, favorecen esta situación.</p>
<p>Ante esta problemática, los centros de salud tratan de optimizar sus recursos mediante diferentes vías, poniendo especial interés en realizar procesos de triaje que les permitan priorizar la atención a los pacientes según su nivel de urgencia. Para ello, en España se utilizan escalas como el MTS (Manchester Triage System), el SET (Sistema Español de Triaje) y el CPTAS (Canadian Pediatric Triage and Acuity Scale) [Soler2010] para establecer el tiempo que un paciente puede esperar para recibir atención médica en base a sus síntomas y evolución.</p>
<p>Sin embargo, realizar un correcto proceso de triaje, además de requerir de un gran conocimiento experto, hace necesario un tiempo para una evaluación clínica que a veces resulta difícil dedicar. En este contexto, se plantea el desarrollo de un SE capaz de ayudar en el proceso de evaluación médica, con el objetivo de facilitar el proceso de triaje.</p>
<p>El primer paso para el desarrollo de un SE es la definición de un conjunto de reglas que modelen el conocimiento con el que se nutrirá. Para ello, es posible recurrir al apoyo de expertos, capaces de definir su conocimiento como reglas, o la aplicación de mecanismos de extracción de conocimiento a partir del procesamiento de conjuntos de datos y sucesos.</p>
<p>En este ejemplo, se recopilaron y procesaron un conjunto de datos relativos a los motivos de consulta pediátrica en un centro de salud, donde la escala de triaje utilizada fue el CPTAS. Los datos fueron anonimizados, seleccionando únicamente aquellos campos que pudieran resultar clave para la extracción de conocimiento y la conformación de reglas. Adicionalmente, se contó con el apoyo de profesionales especialistas del ámbito pediátrico para revisar y complementar algunas de las reglas extraidas. Un extracto de los datos utilizados para el proceso de extracción de reglas se muestra en la Tabla <a href="cap-sist-exp.html#tab:TablaConsultaTriaje">58.1</a>.</p>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:TablaConsultaTriaje">Tabla 58.1: </span>. Ejemplo de datos de motivos de consulta y triaje.</caption>
<thead><tr class="header">
<th>Sexo</th>
<th>Edad</th>
<th>Tiempo Evolución</th>
<th>Causa</th>
<th>Triaje</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Hombre</td>
<td>1-3 años</td>
<td>25-72 horas</td>
<td>Dermatológica</td>
<td>5 (120 minutos)</td>
</tr>
<tr class="even">
<td>Mujer</td>
<td>1-3 años</td>
<td>25-72 horas</td>
<td>Respiratoria</td>
<td>3 (30 minutos)</td>
</tr>
<tr class="odd">
<td>Hombre</td>
<td>4-6 años</td>
<td>7-12 horas</td>
<td>Gastrointestinal</td>
<td>5 (120 minutos)</td>
</tr>
<tr class="even">
<td>Hombre</td>
<td>4-6 años</td>
<td>2-6 horas</td>
<td>Ocular</td>
<td>4 (60 minutos)</td>
</tr>
<tr class="odd">
<td>Mujer</td>
<td>4-6 años</td>
<td>13-24 horas</td>
<td>Fiebre</td>
<td>5 (120 minutos)</td>
</tr>
</tbody>
</table></div>
<p>A partir del procesamiento de un total de 400 visitas médicas mediante un algoritmo de extracción de reglas de asociación como “Magnum Opus”, basado en la definición original de <span class="citation">Webb (<a href="referncias.html#ref-Webb2011" role="doc-biblioref">2011</a>)</span>, y mediante la aplicación del conocimiento de experto proporcionado por un panel de pediatras, se extrajeron un conjunto de reglas con suficiente calidad. A continuación, se muestra un ejemplo de un conjunto de reglas con <span class="math inline">\(10\)</span> de ellas.</p>
<ul>
<li><p>R1: Si Causa Ginecologica o Edad mayor de 12 años <span class="math inline">\(\rightarrow\)</span> Tiempo de Evolución mayor de 73h</p></li>
<li><p>R2: Si Causa Ginecologica <span class="math inline">\(\rightarrow\)</span> Sexo Mujer</p></li>
<li><p>R3: Si Edad menor de 7 días o Causa Fiebre <span class="math inline">\(\rightarrow\)</span> Tiempo de evolución de 1h</p></li>
<li><p>R4: Si Edad mayor de 12 años y Tiempo de Evolución mayor de 73h <span class="math inline">\(\rightarrow\)</span> Causa Respiratoria</p></li>
<li><p>R5: Si Tiempo Evolución mayor de 73h y Causa Ocular <span class="math inline">\(\rightarrow\)</span> Triaje 1</p></li>
<li><p>R6: Si Causa Respiratoria y Sexo Mujer <span class="math inline">\(\rightarrow\)</span> Triaje 3</p></li>
<li><p>R7: Si Tiempo de Evolución es 2-6h o Causa Neurológica <span class="math inline">\(\rightarrow\)</span> Triaje 2</p></li>
<li><p>R8: Si Causa Respiratoria y Tiempo de Evolución es 2-6h <span class="math inline">\(\rightarrow\)</span> Triaje 4</p></li>
<li><p>R9: Si Tiempo de Evolución es 13-24h y Causa Ginecológica y Sexo Mujer <span class="math inline">\(\rightarrow\)</span> Triaje 5</p></li>
<li><p>R10: Si Tiempo de Evolución mayor de 73h <span class="math inline">\(\rightarrow\)</span> Triaje 4</p></li>
</ul>
<p>A continuación, se muestra el código en <strong>R</strong> para la implementación de un SE capaz de procesar reglas como las anteriores, realizando una ejecución para obtener el valor de triaje correspondiente. Para este ejemplo se considera una niña mayor de <span class="math inline">\(12\)</span> años de edad, cuyo motivo de consulta es ginecológico con un tiempo de evolución superior a <span class="math inline">\(73\)</span> horas.</p>
<p>Es importante señalar que, habitualmente, un SE partirá de una base de hechos compuesta por decenas o cientos de reglas. No obstante, para simplificar el siguiente fragmento de código, se considera únicamente la carga de <span class="math inline">\(10\)</span>, reglas a modo de ejemplo.</p>
<p>Se declaran las reglas que conformarán la base conocimiento del SE:</p>
<ol style="list-style-type: decimal">
<li><p>La BC del SE contiene 10 reglas.</p></li>
<li><p>Cada regla se modela como una lista de antecedentes y un consecuente.</p></li>
<li><p>La relación entre los consecuentes se modela con el atributo “operador” del siguiente modo: <code>1 = Y lógico, 0 = O lógico, -1 = no hay operaciones</code></p></li>
</ol>
<div class="sourceCode" id="cb836"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  antecedentes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Causa_Ginecologica"</span>, <span class="st">"Edad_&gt;12a"</span><span class="op">)</span>,</span>
<span>  consecuente <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"TiempoEvolucion_&gt;73h"</span><span class="op">)</span>, operador <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span><span class="va">r2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  antecedentes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Causa_Ginecologica"</span><span class="op">)</span>,</span>
<span>  consecuente <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Sexo_Mujer"</span><span class="op">)</span>, operador <span class="op">=</span> <span class="op">-</span><span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="va">r3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  antecedentes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Edad_&lt;7d"</span>, <span class="st">"Causa_Fiebre"</span><span class="op">)</span>,</span>
<span>  consecuente <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"TiempoEvolucion_1h"</span><span class="op">)</span>, operador <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span><span class="va">r4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  antecedentes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Edad_&gt;12a"</span>, <span class="st">"TiempoEvolucion_&gt;73h"</span><span class="op">)</span>,</span>
<span>  consecuente <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Causa_Respiratoria"</span><span class="op">)</span>, operador <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="va">r5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  antecedentes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"TiempoEvolucion_&gt;73h"</span>, <span class="st">"Causa_Ocular"</span><span class="op">)</span>,</span>
<span>  consecuente <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Triaje_1"</span><span class="op">)</span>, operador <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="va">r6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  antecedentes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Causa_Respiratoria"</span>, <span class="st">"Sexo_Mujer"</span><span class="op">)</span>,</span>
<span>  consecuente <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Triaje_3"</span><span class="op">)</span>, operador <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="va">r7</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  antecedentes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"TiempoEvolucion_2-6h"</span>, <span class="st">"Causa_Neurologica"</span><span class="op">)</span>,</span>
<span>  consecuente <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Triaje_2"</span><span class="op">)</span>, operador <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span><span class="va">r8</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  antecedentes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Causa_Respiratoria"</span>, <span class="st">"TiempoEvolucion_2-6h"</span><span class="op">)</span>,</span>
<span>  consecuente <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Triaje_4"</span><span class="op">)</span>, operador <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="va">r9</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  antecedentes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"TiempoEvolucion_13-24h"</span>, <span class="st">"Causa_Ginecologica"</span>, <span class="st">"Sexo_Mujer"</span><span class="op">)</span>,</span>
<span>  consecuente <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Triaje_5"</span><span class="op">)</span>, operador <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="va">r10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  antecedentes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"TiempoEvolucion_&gt;73h"</span><span class="op">)</span>,</span>
<span>  consecuente <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Triaje_4"</span><span class="op">)</span>, operador <span class="op">=</span> <span class="op">-</span><span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># r1 regla completa</span></span>
<span><span class="co"># r1[1] lista antecedentes</span></span>
<span><span class="co"># r1[[1]] [1] primero de los antecedentes</span></span>
<span><span class="co"># r1[2] lista consecuentes</span></span>
<span><span class="co"># r1[[2]] [1] primero de los consecuentes</span></span>
<span></span>
<span><span class="va">b_hechos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Causa_Ginecologica"</span>, <span class="st">"Edad_&gt;12a"</span>, <span class="st">"TiempoEvolucion_&gt;73h"</span><span class="op">)</span></span></code></pre></div>
<p>Se inicializa la BC con el conjunto de Reglas y la BH con la circunstancia a evaluar.</p>
<div class="sourceCode" id="cb837"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Se añaden todas las reglas a la Base de Conocimiento</span></span>
<span><span class="va">b_conocimiento</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">r1</span>, <span class="va">r2</span>, <span class="va">r3</span>, <span class="va">r4</span>, <span class="va">r5</span>, <span class="va">r6</span>, <span class="va">r7</span>, <span class="va">r8</span>, <span class="va">r9</span>, <span class="va">r10</span><span class="op">)</span></span></code></pre></div>
<p>Se define una función para comprobar la existencia de un número en una lista. Esta función será usada por el motor del SE.</p>
<div class="sourceCode" id="cb838"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Función para comprobar si una lista contiene un número</span></span>
<span></span>
<span><span class="va">contiene</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">numero</span>, <span class="va">lista</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">existe</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">lista</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">lista</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="va">numero</span> <span class="op">==</span> <span class="va">lista</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="va">existe</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">existe</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Se implementa el motor del SE.</p>
<p>El algoritmo ejecuta un bucle en el que, en cada iteración, evalúa las reglas disponibles contenidas en la <em>BC</em>. Considerando los items de la <em>BH</em>, si una regla puede ser “disparada”, se añade al <em>Conjunto Conflicto</em>. La regla “disparada” en una iteración será la primera disponible en el <em>Conjunto Conflicto</em>. El <em>Conjunto Conflicto</em> se inicializa en cada iteración. El consecuente de la regla “disparada” se añade a la <em>BH</em>. Cada regla solo puede “dispararse” una vez, por lo que se actualiza una lista de reglas “disparadas”. El algoritmo finaliza cuando el <em>Conjunto Conflicto</em> queda vacío, al haber sido “disparadas” todas las reglas o no existir más candidatas a ser “disparadas”.</p>
<div class="sourceCode" id="cb839"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Motor del Sistema Experto</span></span>
<span></span>
<span><span class="va">AlgoritmoSE</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">b_hechos</span>, <span class="va">b_conocimiento</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">c_conflicto</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">r_disparadas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">condicion</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span>  <span class="va">iteracion</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>  <span class="kw">while</span> <span class="op">(</span><span class="va">condicion</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">c_conflicto</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Iteración: "</span>, <span class="va">iteracion</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="va">iteracion</span> <span class="op">&lt;-</span> <span class="va">iteracion</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">b_conocimiento</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu">contiene</span><span class="op">(</span><span class="va">i</span>, <span class="va">r_disparadas</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="va">b_conocimiento</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="va">r_disparada</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>          <span class="va">r_disparada</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span>        <span class="op">}</span></span>
<span>        <span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">b_conocimiento</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="va">antecedente</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span>          <span class="kw">for</span> <span class="op">(</span><span class="va">k</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">b_hechos</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="kw">if</span> <span class="op">(</span><span class="va">b_conocimiento</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="va">j</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="va">b_hechos</span><span class="op">[[</span><span class="va">k</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>              <span class="kw">if</span> <span class="op">(</span><span class="va">b_conocimiento</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">||</span> <span class="va">b_conocimiento</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="va">r_disparada</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span>              <span class="va">antecedente</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span>            <span class="op">}</span></span>
<span>          <span class="op">}</span></span>
<span>          <span class="kw">if</span> <span class="op">(</span><span class="va">b_conocimiento</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="va">antecedente</span><span class="op">)</span> <span class="va">r_disparada</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span>          <span class="op">}</span></span>
<span>        <span class="op">}</span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="va">r_disparada</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Regla"</span>, <span class="va">i</span>, <span class="st">"añadida a Conjunto conflicto\n"</span><span class="op">)</span></span>
<span>          <span class="va">c_conflicto</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">c_conflicto</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">i</span></span>
<span>        <span class="op">}</span></span>
<span>      <span class="op">}</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">c_conflicto</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="co"># str("Conjunto conflicto:")</span></span>
<span>      <span class="co"># str(c_conflicto)</span></span>
<span>      <span class="va">r_disparadas</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">r_disparadas</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">c_conflicto</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Regla"</span>, <span class="va">r_disparadas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">r_disparadas</span><span class="op">)</span><span class="op">]</span><span class="op">]</span>, <span class="st">"disparada\n"</span><span class="op">)</span></span>
<span>      <span class="va">b_hechos</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">b_hechos</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">b_conocimiento</span><span class="op">[[</span><span class="va">r_disparadas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">r_disparadas</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="st">"Base de hechos:"</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">b_hechos</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"Consecuente:"</span>, <span class="va">b_conocimiento</span><span class="op">[[</span><span class="va">r_disparadas</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">r_disparadas</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>      <span class="va">condicion</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Ahora considerese, por ejemplo, una posible paciente con más de 12 años de Edad, que acude a consulta por causa Ginecológica con un Tiempo de Evolución de los síntomas mayor de 73h. ¿Cuál será el triaje correspondiente? Para conocerlo, se inicializa la <em>BH</em> con la situación propuesta <code>(Causa_Ginecologica, Edad_&gt;12a y TiempoEvolucion_&gt;73h)</code> y se ejecuta el motor del SE.</p>
<div class="sourceCode" id="cb840"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Se inicializa la base de hechos con la situación propuesta (paciente de más de 12 años, por causa ginecológica con tiempo de evolución mayor de 73h)</span></span>
<span><span class="va">b_hechos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"Causa_Ginecologica"</span>, <span class="st">"Edad_&gt;12a"</span>, <span class="st">"TiempoEvolucion_&gt;73h"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Se lanza la ejecución del motor del Sistema Experto</span></span>
<span><span class="fu">AlgoritmoSE</span><span class="op">(</span><span class="va">b_hechos</span>, <span class="va">b_conocimiento</span><span class="op">)</span></span></code></pre></div>
<p>El resultado del algoritmo, en este caso (motivo de consulta ginecológico y mayor de <span class="math inline">\(12\)</span> años y con un tiempo de evolución de los síntomas mayor de 73h), es un triaje de valor <span class="math inline">\(4\)</span>. Es decir, el tiempo de espera máximo para recibir atención médica debería ser inferior a <span class="math inline">\(60\)</span> minutos. La Tabla <a href="#tab:TablaIteracionesAlgoritmo">58.2</a> muestra el proceso realizado por el algoritmo en cada iteración.</p>
<!-- Para compilar en HTML -->
<!-- tabla-html -->
<div class="inline-figure"><img src="img/tabla-58-2-sist-exp.jpg" width="100%" style="display: block; margin: auto;"></div>
<p>Table: (#tab:TablaIteracionesAlgoritmo). Proceso de ejecución del Sistema Experto.</p>
<p>Como puede observarse, el algoritmo finaliza tras <span class="math inline">\(5\)</span> iteraciones, al alcanzar un conjunto conflicto vacío, dando como resultado un valor de <span class="math inline">\(4\)</span> para el triaje. A continuación, se describe el proceso ejecutado en cada una de las iteraciones.</p>
<ul>
<li><p><strong>Iteración 0:</strong> La Base de Hechos se inicializa con las condiciones establecidas en el ejemplo de consulta médica considerado, es decir, <code>Causa_Ginecologica</code>, <code>Edad_&gt;12a</code> y <code>TiempoEvolucion_&gt;73h</code>. En el Conjunto Conflicto se incluyen aquellas reglas que podrían ser lanzadas con los elementos contenidos en la BH es decir, las reglas R1, R2, R4, R10. Se dispara la regla R1, al ser la primera de la lista de reglas del Conjunto Conflicto. El consecuente de la regla disparada (<code>TiempoEvolucion_&gt;73h</code>) se añade a la BH para la siguiente iteración, aunque en este caso no es necesario porque ya lo contiene. La iteración finaliza estableciendo como conclusión el consecuente de la regla disparada, es decir, <code>TiempoEvolucion_&gt;73h</code>.</p></li>
<li><p><strong>Iteración 1:</strong> El Conjunto Conflicto se inicializa con las reglas que podrían ser lanzadas, excluyendo las ya ejecutadas (R1), a partir de los elementos incluidos en la Base de Hechos tras la iteración anterior, es decir, las reglas R2, R4 y R10. Se lanza la primera de las reglas del Conjunto Conflicto, es decir, R2. El consecuente de la regla disparada (<code>Sexo_Mujer</code>) se añade a la BH. La iteración finaliza estableciendo como conclusión el consecuente de la regla disparada, es decir, <code>Sexo_Mujer</code>.</p></li>
<li><p><strong>Iteración 2:</strong> El Conjunto Conflicto se inicializa con las reglas que podrían ser lanzadas, excluyendo las ya ejecutadas (R1 y R2), a partir de los elementos contenidos en la BH tras la iteración anterior, es decir, las reglas R4 y R10. Se lanza la primera de las reglas del Conjunto Conflicto, es decir, R4. El consecuente de la regla disparada (Causa_Respiratoria) se añade a la BH. La iteración finaliza estableciendo como conclusión el consecuente de la regla disparada, es decir, <code>Causa_Respiratoria</code>.</p></li>
<li><p><strong>Iteración 3:</strong> El Conjunto Conflicto se inicializa con las reglas que podrían ser lanzadas, excluyendo las ya ejecutadas (R1, R2 y R4), a partir de los elementos contenidos en la BH tras la iteración anterior, es decir, las reglas R6 y R10. Se lanza la primera de las reglas del Conjunto Conflicto, es decir, R6. El consecuente de la regla disparada (<code>Triaje_3</code>) se añade a la BH. La iteración finaliza estableciendo como conclusión el consecuente de la regla disparada, es decir, <code>Triaje_3</code>.</p></li>
<li><p><strong>Iteración 4:</strong> El Conjunto Conflicto se inicializa con las reglas que podrían ser lanzadas, excluyendo las ya ejecutadas (R1, R2, R4 y R6), a partir de los elementos contenidos en la BH tras la iteración anterior, en este caso únicamente R10. Se lanza por tanto la regla R10. El consecuente de la regla disparada (<code>Triaje_4</code>) se añade a la BH. La iteración finaliza estableciendo como conclusión el consecuente de la regla disparada, es decir, <code>Triaje_4</code>.</p></li>
<li><p><strong>Iteración 5:</strong> El Conjunto Conflicto queda vacío, al no ser posible incluir en él reglas no disparadas aún y que pudieran ser ejecutadas a partir de los elementos contenidos en la BH. Por tanto, el algoritmo finaliza concluyendo como resultado el consecuente de la última regla lanzadas, es decir, <code>Triaje_4</code>.</p></li>
</ul>
<p>Sin lugar a duda, la implementación del algoritmo, las reglas y el modelado considerado para este caso de estudio resulta una simplificación intencionada del problema, con el único objetivo de facilitar su comprensión desde una perspectiva académica y docente.</p>
<p>En un escenario de aplicación real, el volumen y la complejidad de las reglas debería ser mayor, considerando además la posibilidad de incorporar otras características que permitieran modelar de un modo más completo el estado de salud del paciente y su motivo de consulta.</p>
<p>Actualmente resultan innumerables los ámbitos donde la aplicación de SE puede ser de ayuda. En este caso de estudio, el objetivo ha sido facilitar y mejorar el proceso de triaje del nivel de urgencia en el ámbito pediátrico en atención primaria. Pero, en este mismo contexto, podría valorarse su uso como herramienta de apoyo para, por ejemplo, el diagnóstico de enfermedades o la prescripción de tratamientos.</p>
<p>La tecnología actual y lenguajes de programación como R facilitan la implementación de SE de un modo rápido y sencillo. Por tanto, pueden ser considerados como herramienta de ayuda para situaciones en las que aplicar conocimiento experto resulte clave para la solución de problemas.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="cap-ree.html"><span class="header-section-number">57</span> Predicción de consumo eléctrico con redes neuronales</a></div>
<div class="next"><a href="nlp-textil.html"><span class="header-section-number">59</span> El procesamiento del lenguaje natural para tendencias de moda en textil</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="Índice capítulo"><h2>Índice capítulo</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#cap-sist-exp"><span class="header-section-number">58</span> Implementación de un sistema experto en el ámbito pediátrico</a></li>
<li><a class="nav-link" href="#introducci%C3%B3n-28"><span class="header-section-number">58.1</span> Introducción</a></li>
<li>
<a class="nav-link" href="#marco-te%C3%B3rico"><span class="header-section-number">58.2</span> Marco teórico</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#razonamiento"><span class="header-section-number">58.2.1</span> Razonamiento</a></li></ul>
</li>
<li><a class="nav-link" href="#sistema-experto-para-el-%C3%A1mbito-pedi%C3%A1trico-en-atenci%C3%B3n-primaria"><span class="header-section-number">58.3</span> Sistema experto para el ámbito pediátrico en atención primaria</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Fundamentos de ciencia de datos con R</strong>" coordinado por <a href="https://blog.uclm.es/gemafaviles/" class="text-light">Gema Fernández-Avilés y José-María Montero</a>. Generado por última vez el día 2023-06-16.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>Este libro ha sido generado con el paquete de R <a class="text-light" href="https://bookdown.org">bookdown</a>.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
