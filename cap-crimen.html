<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capítulo 48 Análisis de una red criminal | Fundamentos de ciencia de datos con R</title>
<meta name="author" content="Gema Fernández-Avilés y José-María Montero">
<meta name="description" content="F. Liberatore\(^{a}\), L. Quijano-Sánchez\(^{b}\), M. Camacho-Collados\(^{c}\) \(^{a}\)Cardiff University\(^{b}\)Universidad Autónoma de Madrid\(^{c}\)Ministerio del Interior  48.1 Introducción En...">
<meta name="generator" content="bookdown 0.36 with bs4_book()">
<meta property="og:title" content="Capítulo 48 Análisis de una red criminal | Fundamentos de ciencia de datos con R">
<meta property="og:type" content="book">
<meta property="og:image" content="/img/cover.png">
<meta property="og:description" content="F. Liberatore\(^{a}\), L. Quijano-Sánchez\(^{b}\), M. Camacho-Collados\(^{c}\) \(^{a}\)Cardiff University\(^{b}\)Universidad Autónoma de Madrid\(^{c}\)Ministerio del Interior  48.1 Introducción En...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capítulo 48 Análisis de una red criminal | Fundamentos de ciencia de datos con R">
<meta name="twitter:description" content="F. Liberatore\(^{a}\), L. Quijano-Sánchez\(^{b}\), M. Camacho-Collados\(^{c}\) \(^{a}\)Cardiff University\(^{b}\)Universidad Autónoma de Madrid\(^{c}\)Ministerio del Interior  48.1 Introducción En...">
<meta name="twitter:image" content="/img/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.6.0/transition.js"></script><script src="libs/bs3compat-0.6.0/tabs.js"></script><script src="libs/bs3compat-0.6.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="libs/tabwid-1.1.3/tabwid.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
<link rel="stylesheet" href="bs4_book.css">
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Fundamentos de ciencia de datos con <strong>R</strong></a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Buscar" aria-label="Buscar">
</form>

      <nav aria-label="Contenido"><h2>Contenido</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Prefacio</a></li>
<li><a class="" href="pr%C3%B3logo-by-julia-silge.html">Prólogo (by Julia Silge)</a></li>
<li><a class="" href="pr%C3%B3logo-por-yanina-bellini.html">Prólogo (por Yanina Bellini)</a></li>
<li class="book-part">Ciencia, datos, software… y científicos</li>
<li><a class="" href="ciencia-datos.html"><span class="header-section-number">1</span> ¿Es la ciencia de datos una ciencia?</a></li>
<li><a class="" href="metodologia.html"><span class="header-section-number">2</span> Metodología en ciencia de datos</a></li>
<li><a class="" href="ch-110003.html"><span class="header-section-number">3</span> R para ciencia de datos</a></li>
<li><a class="" href="cap-etica.html"><span class="header-section-number">4</span> Ética en la ciencia de datos</a></li>
<li class="book-part">Bienvenidos a la jungla de datos</li>
<li><a class="" href="datos-sql.html"><span class="header-section-number">5</span> Gestión de bases de datos relacionales</a></li>
<li><a class="" href="cap-nosql.html"><span class="header-section-number">6</span> Gestión de bases de datos NoSQL</a></li>
<li><a class="" href="DGDQM.html"><span class="header-section-number">7</span> Gobierno, gestión y calidad del dato</a></li>
<li><a class="" href="id_130009.html"><span class="header-section-number">8</span> Integración y limpieza de datos</a></li>
<li><a class="" href="chap-feature.html"><span class="header-section-number">9</span> Selección y transformación de variables</a></li>
<li><a class="" href="chap-herramientas.html"><span class="header-section-number">10</span> Herramientas para el análisis en ciencia de datos</a></li>
<li><a class="" href="id_120006-aed.html"><span class="header-section-number">11</span> Análisis exploratorio de datos</a></li>
<li class="book-part">Fundamentos de estadística</li>
<li><a class="" href="Funda-probab.html"><span class="header-section-number">12</span> Probabilidad</a></li>
<li><a class="" href="Fundainfer.html"><span class="header-section-number">13</span> Inferencia estadística</a></li>
<li><a class="" href="muestreo.html"><span class="header-section-number">14</span> Muestreo y remuestreo</a></li>
<li class="book-part">Modelización estadística</li>
<li><a class="" href="cap-lm.html"><span class="header-section-number">15</span> Modelización lineal</a></li>
<li><a class="" href="cap-glm.html"><span class="header-section-number">16</span> Modelos lineales generalizados</a></li>
<li><a class="" href="cap-gam.html"><span class="header-section-number">17</span> Modelos aditivos generalizados</a></li>
<li><a class="" href="cap-mxm.html"><span class="header-section-number">18</span> Modelos mixtos</a></li>
<li><a class="" href="cap-sparse.html"><span class="header-section-number">19</span> Modelos \(\textit{sparse}\) y métodos penalizados de regresión</a></li>
<li><a class="" href="cap-series-temp.html"><span class="header-section-number">20</span> Modelización de series temporales</a></li>
<li><a class="" href="cap-discriminante.html"><span class="header-section-number">21</span> Análisis discriminante</a></li>
<li><a class="" href="cap-conjunto.html"><span class="header-section-number">22</span> Análisis conjunto</a></li>
<li><a class="" href="tablas-contingencia.html"><span class="header-section-number">23</span> Análisis de tablas de contingencia</a></li>
<li class="book-part">Machine learning supervisado</li>
<li><a class="" href="cap-arboles.html"><span class="header-section-number">24</span> Árboles de clasificación y regresión</a></li>
<li><a class="" href="cap-svm.html"><span class="header-section-number">25</span> Máquinas de vector soporte</a></li>
<li><a class="" href="cap-knn.html"><span class="header-section-number">26</span> Clasificador \(k\)-vecinos más próximos</a></li>
<li><a class="" href="cap-naive-bayes.html"><span class="header-section-number">27</span> Naive Bayes</a></li>
<li><a class="" href="cap-bagg-rf.html"><span class="header-section-number">28</span> Métodos ensamblados: \(\bf \textit {bagging}\) y \(\bf \textit{random}\) \(\bf \textit{forest}\)</a></li>
<li><a class="" href="cap-boosting-xgboost.html"><span class="header-section-number">29</span> \(\bf \textit{Boosting}\) y el algoritmo XGBoost</a></li>
<li class="book-part">Machine learning no supervisado</li>
<li><a class="" href="cap-cluster.html"><span class="header-section-number">30</span> Análisis clúster: clusterización jerárquica</a></li>
<li><a class="" href="no-jerarquico.html"><span class="header-section-number">31</span> Análisis clúster: clusterización no jerárquica</a></li>
<li><a class="" href="acp.html"><span class="header-section-number">32</span> Análisis de componentes principales</a></li>
<li><a class="" href="af.html"><span class="header-section-number">33</span> Análisis factorial</a></li>
<li><a class="" href="mds.html"><span class="header-section-number">34</span> Escalamiento multidimensional</a></li>
<li><a class="" href="correspondencias.html"><span class="header-section-number">35</span> Análisis de correspondencias</a></li>
<li class="book-part">Deep learning</li>
<li><a class="" href="capNN.html"><span class="header-section-number">36</span> Redes neuronales artificiales</a></li>
<li><a class="" href="cap-redes-convol.html"><span class="header-section-number">37</span> Redes neuronales convolucionales</a></li>
<li class="book-part">Ciencia de datos de texto y redes</li>
<li><a class="" href="mineria-textos.html"><span class="header-section-number">38</span> Minería de textos</a></li>
<li><a class="" href="grafos.html"><span class="header-section-number">39</span> Análisis de grafos y redes sociales</a></li>
<li class="book-part">Ciencia de datos espaciales</li>
<li><a class="" href="datos-espaciales.html"><span class="header-section-number">40</span> Trabajando con datos espaciales</a></li>
<li><a class="" href="geo.html"><span class="header-section-number">41</span> Geoestadística</a></li>
<li><a class="" href="cap-econom-esp.html"><span class="header-section-number">42</span> Modelos econométricos espaciales</a></li>
<li><a class="" href="cap-pp.html"><span class="header-section-number">43</span> Procesos de puntos</a></li>
<li class="book-part">Comunica y colabora</li>
<li><a class="" href="id_120007-informes.html"><span class="header-section-number">44</span> Informes reproducibles con R Markdown y Quarto</a></li>
<li><a class="" href="shiny.html"><span class="header-section-number">45</span> Creación de aplicaciones web interactivas con Shiny</a></li>
<li><a class="" href="github.html"><span class="header-section-number">46</span> Git y GitHub R</a></li>
<li><a class="" href="geoproces.html"><span class="header-section-number">47</span> Geoprocesamiento en nube</a></li>
<li class="book-part">Casos de estudio en ciencia de datos</li>
<li><a class="active" href="cap-crimen.html"><span class="header-section-number">48</span> Análisis de una red criminal</a></li>
<li><a class="" href="cap-publicidad.html"><span class="header-section-number">49</span> Optimización de inversiones publicitarias</a></li>
<li><a class="" href="cap-twitter.html"><span class="header-section-number">50</span> ¿Cómo tuitea Elon Musk?</a></li>
<li><a class="" href="cap-periodismo.html"><span class="header-section-number">51</span> Análisis electoral: de RStudio a su periódico favorito</a></li>
<li><a class="" href="paro-clm.html"><span class="header-section-number">52</span> El impacto de las crisis financiera y de la COVID-19 en el paro de CLM</a></li>
<li><a class="" href="cap-rfm.html"><span class="header-section-number">53</span> Segmentación de clientes en el comercio minorista</a></li>
<li><a class="" href="cap-medicina.html"><span class="header-section-number">54</span> Análisis de datos en medicina</a></li>
<li><a class="" href="cap-futbol.html"><span class="header-section-number">55</span> Messi y Ronaldo: dos ídolos desde la perspectiva de los datos</a></li>
<li><a class="" href="cambioclimatico.html"><span class="header-section-number">56</span> Una nota sobre el cambio climático</a></li>
<li><a class="" href="cap-sist-exp.html"><span class="header-section-number">57</span> Implementación de un sistema experto en el ámbito pediátrico</a></li>
<li><a class="" href="cap-ree.html"><span class="header-section-number">58</span> Predicción de consumo eléctrico con redes neuronales artificiales</a></li>
<li><a class="" href="nlp-textil.html"><span class="header-section-number">59</span> El procesamiento del lenguaje natural para tendencias de moda en textil</a></li>
<li><a class="" href="cap-fraude.html"><span class="header-section-number">60</span> Detección de fraude de tarjetas de crédito</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="info-session.html"><span class="header-section-number">A</span> Información de la sesión</a></li>
<li><a class="" href="referencias.html">Referencias</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="cap-crimen" class="section level1" number="48">
<h1>
<span class="header-section-number">Capítulo 48</span> Análisis de una red criminal<a class="anchor" aria-label="anchor" href="#cap-crimen"><i class="fas fa-link"></i></a>
</h1>
<p><em>F. Liberatore</em><span class="math inline">\(^{a}\)</span>, <em>L. Quijano-Sánchez</em><span class="math inline">\(^{b}\)</span>, <em>M. Camacho-Collados</em><span class="math inline">\(^{c}\)</span></p>
<p><span class="math inline">\(^{a}\)</span>Cardiff University<br><span class="math inline">\(^{b}\)</span>Universidad Autónoma de Madrid<br><span class="math inline">\(^{c}\)</span>Ministerio del Interior</p>
<div id="introducción-25" class="section level2" number="48.1">
<h2>
<span class="header-section-number">48.1</span> Introducción<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n-25"><i class="fas fa-link"></i></a>
</h2>
<p>En este capítulo se plantea la idea de realizar un <strong>análisis de una red de crimen organizado</strong>. Para ello, se estudia la red derivada de un dataset real, relativo a la operación <em>Oversize</em>. El estudio se llevará a cabo usando la librería <code>igraph</code>.
</p>
</div>
<div id="el-conjunto-de-datos-oversize" class="section level2" number="48.2">
<h2>
<span class="header-section-number">48.2</span> El conjunto de datos <em>Oversize</em><a class="anchor" aria-label="anchor" href="#el-conjunto-de-datos-oversize"><i class="fas fa-link"></i></a>
</h2>
<p>Los datos que se van a analizar se han obtenido de la operación <em>Oversize</em> <span class="citation">(<a href="referencias.html#ref-berlusconi2016">Berlusconi et al. 2016</a>; <a href="referencias.html#ref-oversize1">Tribunale di Milano, Ufficio del giudice per le indagini preliminari 2006</a>; <a href="referencias.html#ref-oversize2">Tribunale di Lecco, 2a Sezione Penale 2009</a>)</span>, un proceso italiano contra un grupo mafioso. La investigación duró del 2000 al 2006, y se enfocó en más de 50 sospechosos involucrados en tráfico internacional de drogas, homicidios y robos. El juicio empezó en el 2007 y duró hasta el 2009, cuando se dictó la sentencia y los principales sospechosos fueron condenados con penas de 5 a 22 años de cárcel. La mayoría de los sospechosos eran afiliados de la ’<em>Ndrangheta</em>, una mafia de Calabria (una región del sur de Italia) con ramificaciones en otras regiones y en el extranjero.</p>
<p>En particular, se va a estudiar la red obtenida de las escuchas telefónicas. Los datos hacen referencia a todas las conversaciones telefónicas transcritas por la policía y consideradas relevantes. En esta red, los nodos representan sospechosos (los datos son anónimos y los nombres asignados en la red se han generado de forma aleatoria). Las aristas conectan los sospechosos que han tenido al menos una conversación telefónica relevante al caso durante la investigación.</p>
</div>
<div id="creación-de-la-red-mafiosa" class="section level2" number="48.3">
<h2>
<span class="header-section-number">48.3</span> Creación de la red mafiosa<a class="anchor" aria-label="anchor" href="#creaci%C3%B3n-de-la-red-mafiosa"><i class="fas fa-link"></i></a>
</h2>
<p></p>
<p>El dataset <code>Oversize_nodes</code> contiene el listado de nodos con sus propiedades, en este caso el nombre (ficticio) del sospechoso. <code>Oversize_edges</code> contiene las aristas del grafo, representadas como parejas de nodos, a su vez identificados por su ID. A partir de estos datasets la librería <code>igraph</code> permite crear un grafo, tal y como se ilustra a continuación.</p>
<div class="sourceCode" id="cb729"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://r.igraph.org/">"igraph"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st">"CDR"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">oversize_edges</span>, <span class="va">oversize_nodes</span><span class="op">)</span></span>
<span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">graph_from_data_frame</a></span><span class="op">(</span>d<span class="op">=</span><span class="va">oversize_edges</span>, </span>
<span>                             vertices<span class="op">=</span><span class="va">oversize_nodes</span>, </span>
<span>                             directed<span class="op">=</span><span class="cn">F</span><span class="op">)</span> </span>
<span><span class="va">net</span></span>
<span><span class="co">#&gt; IGRAPH f7de375 UN-- 182 247 -- </span></span>
<span><span class="co">#&gt; + attr: name (v/c)</span></span>
<span><span class="co">#&gt; + edges from f7de375 (vertex names):</span></span>
<span><span class="co">#&gt;  [1] Casto Ben          --Gustavo Mango          </span></span>
<span><span class="co">#&gt;  [2] Casto Ben          --Metrofane Abbatiello   </span></span>
<span><span class="co">#&gt;  [3] Uranio Natoli      --Fidenziano Marcellino  </span></span>
<span><span class="co">#&gt;  [4] Lancilotto Di Biasi--Romolo Gemignani       </span></span>
<span><span class="co">#&gt;  [5] Lancilotto Di Biasi--Fidenziano Marcellino  </span></span>
<span><span class="co">#&gt;  [6] Senesio Rabito     --Pacifico Caliri        </span></span>
<span><span class="co">#&gt;  [7] Senesio Rabito     --Michelangelo Piccininni</span></span>
<span><span class="co">#&gt;  [8] Romolo Gemignani   --Alighiero Mazzarella   </span></span>
<span><span class="co">#&gt; + ... omitted several edges</span></span></code></pre></div>
<p>La vista previa del grafo indica lo siguiente:</p>
<ul>
<li><p>el grafo es no dirigido (<em>UN</em>) y está compuesto por 182 nodos y 247 aristas;</p></li>
<li><p>el único atributo es el nombre de los nodos (<em>attr: name (v/c)</em>);</p></li>
<li><p>finalmente, se proporciona una previsualización de un subconjunto de aristas, indicando para cada una los dos nodos conectados (ej.: <em>Casto Ben</em>—<em>Gustavo Mango</em>).</p></li>
</ul>
<p>
</p>
</div>
<div id="visualización-de-la-red-mafiosa" class="section level2" number="48.4">
<h2>
<span class="header-section-number">48.4</span> Visualización de la red mafiosa<a class="anchor" aria-label="anchor" href="#visualizaci%C3%B3n-de-la-red-mafiosa"><i class="fas fa-link"></i></a>
</h2>
<p>Para hacerse una idea de qué aspecto tiene el grafo, se procede a su visualización usando el comando <code><a href="https://rdrr.io/pkg/terra/man/plot.html">plot()</a></code> de <strong>R</strong>.</p>
<div class="sourceCode" id="cb730"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">net</span>, asp<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:vis-red1"></span>
<img src="212048_cd_policia_files/figure-html/vis-red1-1.png" alt="Grafo básico de la red mafiosa." width="60%"><p class="caption">
Figura 48.1: Grafo básico de la red mafiosa.
</p>
</div>
<p>Tal y como se aprecia en la Fig. <a href="cap-crimen.html#fig:vis-red1">48.1</a>, el resultado no es muy claro. Todos los nodos tienen el mismo tamaño y se solapan entre ellos. Además, se muestran los nombres de todos los actores dentro de la red, lo cual dificulta ulteriormente su interpretación.</p>
<p>Se puede mejorar esta presentación usando unos parámetros de <code><a href="https://rdrr.io/pkg/terra/man/plot.html">plot()</a></code> específicos de la librería <code>igraph</code>. En particular:</p>
<ul>
<li><p><code>vertex.size</code>: determina el tamaño de los nodos.</p></li>
<li><p><code>vertex.label</code>: define el texto asociado a cada nodo. Por defecto se asume que es su nombre. En el ejemplo de abajo, se excluyen los nombres de la visualización.</p></li>
</ul>
<div class="sourceCode" id="cb731"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">net</span>, vertex.size<span class="op">=</span><span class="fl">2</span>, vertex.label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">''</span><span class="op">)</span>,  asp<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:vis-red2"></span>
<img src="212048_cd_policia_files/figure-html/vis-red2-1.png" alt="Grafo básico de la red mafiosa (mejorado)." width="60%"><p class="caption">
Figura 48.2: Grafo básico de la red mafiosa (mejorado).
</p>
</div>
<p>En la Fig. <a href="cap-crimen.html#fig:vis-red2">48.2</a> se observa cómo el grafo permite una mejor valoración de la distribución de los actores dentro de la red. Por ejemplo, hay dos grupos pequeños (de cuatro y dos actores) completamente desconectados de la red principal.</p>
</div>
<div id="importancia-de-los-actores-delincuentes" class="section level2" number="48.5">
<h2>
<span class="header-section-number">48.5</span> Importancia de los actores (delincuentes)<a class="anchor" aria-label="anchor" href="#importancia-de-los-actores-delincuentes"><i class="fas fa-link"></i></a>
</h2>
<p>Las medidas de centralidad permiten asignar un valor a cada actor que establece su importancia relativa a los demás. Existen diversas medidas, cada una con sus características y finalidad. En este ejemplo se van a usar las siguientes:</p>
<ul>
<li><p><strong>grado</strong>: número de aristas que llegan al nodo o salen de él. Cuanto más alto sea este valor, más vecinos tendrá el nodo;</p></li>
<li><p><strong>intermediación</strong>: cuantifica el número de veces que un nodo se encuentra en el camino más corto entre otros actores. Cuanto más alto sea este valor, más información pasará por el nodo.
</p></li>
</ul>
<div class="sourceCode" id="cb732"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dgr</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://r.igraph.org/reference/degree.html">degree</a></span><span class="op">(</span><span class="va">net</span><span class="op">)</span> <span class="co"># Centralidad de grado</span></span>
<span><span class="va">btwn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/betweenness.html">betweenness</a></span><span class="op">(</span><span class="va">net</span><span class="op">)</span> <span class="co"># Centralidad de intermediación</span></span></code></pre></div>
<p>A continuación, se muestran los actores con los valores más altos en cada medida de centralidad.</p>
<div class="sourceCode" id="cb733"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/headtail.html">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/sort.html">sort</a></span><span class="op">(</span><span class="va">dgr</span>, decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;        Gustavo Mango      Pacifico Caliri Metrofane Abbatiello </span></span>
<span><span class="co">#&gt;                   32                   31                   18 </span></span>
<span><span class="co">#&gt;        Olindo Iacona         Arturo Gizzi      Guido Minervini </span></span>
<span><span class="co">#&gt;                   17                   16                   16</span></span></code></pre></div>
<div class="sourceCode" id="cb734"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/headtail.html">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/sort.html">sort</a></span><span class="op">(</span><span class="va">btwn</span>, decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;        Gustavo Mango            Bino Lana      Pacifico Caliri </span></span>
<span><span class="co">#&gt;             4602.167             4292.902             4056.435 </span></span>
<span><span class="co">#&gt;        Olindo Iacona Metrofane Abbatiello      Donato Di Santi </span></span>
<span><span class="co">#&gt;             3397.907             3387.931             2978.427</span></span></code></pre></div>
<p>Las medidas de centralidad se pueden usar para mejorar la visualización del grafo. Primero, se filtran todos los nodos que tengan grado menor que dos, ya que representan actores muy marginales en la red. Luego, se representa el tamaño de cada nodo en función de su valor de intermediación, escalando con un tamaño máximo de cinco.
</p>
<div class="sourceCode" id="cb735"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vertex_filter</span> <span class="op">&lt;-</span> <span class="va">dgr</span> <span class="op">&gt;</span> <span class="fl">1</span> <span class="co"># deteccion actores marginales</span></span>
<span><span class="va">scaled_btwn</span> <span class="op">=</span> <span class="fl">0.1</span><span class="op">+</span> <span class="fl">4.9</span><span class="op">*</span><span class="va">btwn</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">btwn</span><span class="op">)</span> <span class="co"># Escalado del tamaño del nodo en funcion de la intermediación</span></span>
<span><span class="va">net2</span> <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/subgraph.html">induced.subgraph</a></span><span class="op">(</span><span class="va">net</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">vertex_filter</span><span class="op">)</span><span class="op">)</span> <span class="co"># creación subgrafo</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">net2</span>, </span>
<span>     vertex.size<span class="op">=</span><span class="va">scaled_btwn</span><span class="op">[</span><span class="va">vertex_filter</span><span class="op">]</span>, </span>
<span>     vertex.label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">''</span><span class="op">)</span>, </span>
<span>     rescale<span class="op">=</span><span class="cn">T</span>, </span>
<span>     asp <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="co"># visualización subgrafo</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:red-centralidad"></span>
<img src="212048_cd_policia_files/figure-html/red-centralidad-1.png" alt="Grafo de la red mafiosa (mejorado con medidas de centralidad)." width="60%"><p class="caption">
Figura 48.3: Grafo de la red mafiosa (mejorado con medidas de centralidad).
</p>
</div>
<p>Como se puede apreciar en la Fig. <a href="cap-crimen.html#fig:red-centralidad">48.3</a>, gracias a las medidas de centralidad se consigue tener una mejor idea de cómo se configura la red respecto a sus actores más importantes.</p>
</div>
<div id="identificación-de-comunidades-de-la-mafia" class="section level2" number="48.6">
<h2>
<span class="header-section-number">48.6</span> Identificación de comunidades de la mafia<a class="anchor" aria-label="anchor" href="#identificaci%C3%B3n-de-comunidades-de-la-mafia"><i class="fas fa-link"></i></a>
</h2>
<p>A continuación, se procede a identificar las comunidades existentes en el grafo de la operación <em>Overdrive</em>. <code>igraph</code> proporciona una gran variedad de algoritmos para la detección de comunidades en redes sociales. En el siguiente ejemplo, se usa el algoritmo Louvain <span class="citation">(<a href="referencias.html#ref-blondel2008fast">Blondel et al. 2008</a>)</span>, que es el más popular.</p>
<div class="sourceCode" id="cb736"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">louvain_partition</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/cluster_louvain.html">cluster_louvain</a></span><span class="op">(</span><span class="va">net</span><span class="op">)</span> <span class="co"># Ejecución del algoritmo Louvain</span></span>
<span><span class="va">net</span><span class="op">$</span><span class="va">community</span> <span class="op">&lt;-</span> <span class="va">louvain_partition</span><span class="op">$</span><span class="va">membership</span> <span class="co"># Asignación de las comunidades al grafo</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/unique.html">unique</a></span><span class="op">(</span><span class="va">net</span><span class="op">$</span><span class="va">community</span><span class="op">)</span> <span class="co"># Visualización de las comunidades encontradas</span></span>
<span><span class="co">#&gt; [1] 1 2 3 4 5 6 7 8 9</span></span></code></pre></div>
<p>El algoritmo identifica distintas comunidades, cada una con su número asignado.</p>
</div>
<div id="visualización-de-comunidades-de-la-mafia" class="section level2" number="48.7">
<h2>
<span class="header-section-number">48.7</span> Visualización de comunidades de la mafia<a class="anchor" aria-label="anchor" href="#visualizaci%C3%B3n-de-comunidades-de-la-mafia"><i class="fas fa-link"></i></a>
</h2>
<p></p>
<p>Se procede a visualizar las comunidades detectadas en el subgrafo, representando cada una de ellas en un color distinto. Además, para mejorar la calidad de la información representada, se resalta la importancia de cada actor representando los nodos asociados y sus nombres en tamaños proporcionales a su centralidad en toda la red (Fig. <a href="cap-crimen.html#fig:com-mafia">48.4</a>).</p>
<div class="sourceCode" id="cb737"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">size</span> <span class="op">&lt;-</span> <span class="va">scaled_btwn</span><span class="op">[</span><span class="va">vertex_filter</span><span class="op">]</span> <span class="co"># Tamaño del nodo en funcion de su centralidad</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">frame.color</span> <span class="op">&lt;-</span> <span class="st">"grey"</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="va">net</span><span class="op">$</span><span class="va">community</span><span class="op">[</span><span class="va">vertex_filter</span><span class="op">]</span> <span class="co"># Color del nodo en función de su comunidad</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">label.cex</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="va">scaled_btwn</span><span class="op">[</span><span class="va">vertex_filter</span><span class="op">]</span><span class="op">)</span><span class="op">/</span><span class="fl">6</span> <span class="co"># Escalado del nombre en función de su centralidad</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">label.color</span> <span class="op">&lt;-</span> <span class="st">'black'</span></span>
<span></span>
<span><span class="co"># Definicion del color de las aristas en funcion de la comunidad de origen</span></span>
<span><span class="va">edge.start</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/ends.html">ends</a></span><span class="op">(</span><span class="va">net2</span>, es <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/E.html">E</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span>, names <span class="op">=</span> <span class="cn">F</span><span class="op">)</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span> </span>
<span><span class="fu"><a href="https://r.igraph.org/reference/E.html">E</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/V.html">V</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">color</span><span class="op">[</span><span class="va">edge.start</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">net2</span>, asp<span class="op">=</span><span class="fl">0</span><span class="op">)</span> <span class="co"># Los resultados puede ser distintos con cada ejecución</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:com-mafia"></span>
<img src="212048_cd_policia_files/figure-html/com-mafia-1.png" alt="Visualización de comunidades de la mafia." width="75%"><p class="caption">
Figura 48.4: Visualización de comunidades de la mafia.
</p>
</div>
<p>Se puede mejorar aún más el aspecto del grafo. Para ello, se va a experimentar con una disposición diferente de los nodos. En este ejemplo, se usa el algoritmo Fruchterman-Reingold <span class="citation">(<a href="referencias.html#ref-fruchterman1991graph">Fruchterman and Reingold 1991</a>)</span>. Además, se aplica un efecto de curvatura a las aristas asignando un valor positivo al parámetro <code>edge.curved</code>. El resultado se puede ver en la Fig. <a href="cap-crimen.html#fig:red-fr">48.5</a>.</p>
<div class="sourceCode" id="cb738"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">l1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/layout_with_fr.html">layout_with_fr</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span> <span class="co"># algoritmo Fruchterman-Reingold</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">net2</span>, </span>
<span>     layout<span class="op">=</span><span class="va">l1</span>, </span>
<span>     asp <span class="op">=</span> <span class="fl">0</span>, </span>
<span>     edge.curved<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="co"># Los resultados pueden ser distintos con cada ejecución</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:red-fr"></span>
<img src="212048_cd_policia_files/figure-html/red-fr-1.png" alt="Visualización de comunidades de la mafia con el algoritmo Fruchterman-Reingold." width="75%"><p class="caption">
Figura 48.5: Visualización de comunidades de la mafia con el algoritmo Fruchterman-Reingold.
</p>
</div>
<p>Finalmente, se puede exportar el grafo como PDF usando la función <code><a href="https://rdrr.io/r/grDevices/pdf.html">pdf()</a></code> de <strong>R</strong>.</p>
<div class="sourceCode" id="cb739"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/grDevices/pdf.html">pdf</a></span><span class="op">(</span><span class="st">'grafo_final.pdf'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">net2</span>, layout<span class="op">=</span><span class="va">l1</span>, asp <span class="op">=</span> <span class="fl">0</span>, edge.curved<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="co"># Los resultados puede ser distintos con cada ejecucion</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Como se ha podido observar tras las acciones anteriores, en la red se aprecian siete distintas comunidades. Tres destacan por su importancia, lideradas por Gustavo Mango, Bino Lana y Pacifico Caliri. Bino Lana, en particular, tiene especial relevancia ya que actúa como un puente entre Gustavo Mango y Pacificio Caliri.</p>
<!-- ```{r img-paq-cdr, echo=FALSE, out.width='15%',} -->
<!-- knitr::include_graphics("img/LogoCDR_transparente.png") -->
<!-- ``` -->

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="geoproces.html"><span class="header-section-number">47</span> Geoprocesamiento en nube</a></div>
<div class="next"><a href="cap-publicidad.html"><span class="header-section-number">49</span> Optimización de inversiones publicitarias</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="Índice del capítulo"><h2>Índice del capítulo</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#cap-crimen"><span class="header-section-number">48</span> Análisis de una red criminal</a></li>
<li><a class="nav-link" href="#introducci%C3%B3n-25"><span class="header-section-number">48.1</span> Introducción</a></li>
<li><a class="nav-link" href="#el-conjunto-de-datos-oversize"><span class="header-section-number">48.2</span> El conjunto de datos Oversize</a></li>
<li><a class="nav-link" href="#creaci%C3%B3n-de-la-red-mafiosa"><span class="header-section-number">48.3</span> Creación de la red mafiosa</a></li>
<li><a class="nav-link" href="#visualizaci%C3%B3n-de-la-red-mafiosa"><span class="header-section-number">48.4</span> Visualización de la red mafiosa</a></li>
<li><a class="nav-link" href="#importancia-de-los-actores-delincuentes"><span class="header-section-number">48.5</span> Importancia de los actores (delincuentes)</a></li>
<li><a class="nav-link" href="#identificaci%C3%B3n-de-comunidades-de-la-mafia"><span class="header-section-number">48.6</span> Identificación de comunidades de la mafia</a></li>
<li><a class="nav-link" href="#visualizaci%C3%B3n-de-comunidades-de-la-mafia"><span class="header-section-number">48.7</span> Visualización de comunidades de la mafia</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Fundamentos de ciencia de datos con <strong>R</strong></strong>" coordinado por <a href="https://blog.uclm.es/gemafaviles/" class="text-light">Gema Fernández-Avilés y José-María Montero</a>. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>Este libro ha sido generado con el paquete de R <a class="text-light" href="https://bookdown.org">bookdown</a>.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
